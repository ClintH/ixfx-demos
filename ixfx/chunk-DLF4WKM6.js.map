{"version":3,"sources":["../src/collections/Iterables.ts"],"sourcesContent":["import { isEqualDefault } from '../util/IsEqual.js'\n\nexport const max = <V>(iterable: Iterable<V>, scorer: (v: V) => number): V | undefined => {\n  let highestValue: V | undefined;\n  let highestScore = Number.MIN_SAFE_INTEGER;\n  for (const value of iterable) {\n    const score = scorer(value);\n    if (score >= highestScore) {\n      highestScore = score;\n      highestValue = value;\n    }\n  }\n  return highestValue;\n}\n\nexport const min = <V>(iterable: Iterable<V>, scorer: (v: V) => number): V | undefined => {\n  let lowestValue: V | undefined;\n  let lowestScore\n    = Number.MAX_SAFE_INTEGER;\n  for (const value of iterable) {\n    const score = scorer(value);\n    if (score <= lowestScore) {\n      lowestScore = score;\n      lowestValue = value;\n    }\n  }\n  return lowestValue;\n}\n\n/**\n * Returns _true_ if all values in iterables are equal, regardless\n * of their position. Uses === equality semantics by default.\n * \n * @example Default equality checking\n * ```js\n * const a = ['apples','oranges','pears'];\n * const b = ['pears','oranges','apples'];\n * compareValuesEqual(a, b); // True\n * ```\n *\n * @example Custom equality checking\n * ```js\n * const a = [ { name: 'John' }];\n * const b = [ { name: 'John' }];\n * // False, since object identies are different\n * compareValuesEqual(a, b); \n * // True, since now we're comparing by value\n * compareValuesEqual(a, b, (aa,bb) => aa.name === bb.name);\n * ```\n * @param arrays\n * @param eq\n */\nexport const compareValuesEqual = <V>(\n  //eslint-disable-next-line functional/prefer-readonly-type\n  iterableA: Iterable<V>,\n  iterableB: Iterable<V>,\n  eq = isEqualDefault<V>\n): boolean => {\n  const returnValue = compareValues(iterableA, iterableB, eq);\n  return returnValue.a.length === 0 && returnValue.b.length === 0;\n};\n\n\n/**\n * Compares the values of two iterables, returning a list\n * of items they have in common, and those unique in `a` or `b`.\n * Ignores ordering of values.\n *\n * ```js\n * const a = ['apples', 'oranges', 'pears' ]\n * const b = ['pears', 'kiwis', 'bananas' ];\n *\n * const r = compareValues(a, b);\n * r.shared;  // [ 'pears' ]\n * r.a;       // [ 'apples', 'oranges' ]\n * r.b;       // [ 'kiwis', 'bananas' ]\n * ```\n * @param a\n * @param b\n * @param eq\n * @returns\n */\nexport const compareValues = <V>(\n  a: Iterable<V>,\n  b: Iterable<V>,\n  eq = isEqualDefault<V>\n) => {\n  const shared = [];\n  const aUnique = [];\n  const bUnique = [];\n\n  for (const element of a) {\n    //eslint-disable-next-line functional/no-let\n    let seenInB = false;\n    for (const element_ of b) {\n      if (eq(element, element_)) {\n        seenInB = true;\n        break;\n      }\n    }\n    if (seenInB) {\n      //eslint-disable-next-line functional/immutable-data\n      shared.push(element);\n    } else {\n      //eslint-disable-next-line functional/immutable-data\n      aUnique.push(element);\n    }\n  }\n\n  for (const element of b) {\n    //eslint-disable-next-line functional/no-let\n    let seenInA = false;\n    for (const element_ of a) {\n      if (eq(element, element_)) {\n        seenInA = true;\n      }\n    }\n    if (!seenInA) {\n      //eslint-disable-next-line functional/immutable-data\n      bUnique.push(element);\n    }\n  }\n\n  const isSame = aUnique.length === 0 && bUnique.length === 0;\n  return {\n    shared,\n    a: aUnique,\n    b: bUnique,\n    isSame\n  };\n};\n"],"mappings":";;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,IAAM,MAAM,CAAI,UAAuB,WAA4C;AACxF,MAAI;AACJ,MAAI,eAAe,OAAO;AAC1B,aAAW,SAAS,UAAU;AAC5B,UAAM,QAAQ,OAAO,KAAK;AAC1B,QAAI,SAAS,cAAc;AACzB,qBAAe;AACf,qBAAe;AAAA,IACjB;AAAA,EACF;AACA,SAAO;AACT;AAEO,IAAM,MAAM,CAAI,UAAuB,WAA4C;AACxF,MAAI;AACJ,MAAI,cACA,OAAO;AACX,aAAW,SAAS,UAAU;AAC5B,UAAM,QAAQ,OAAO,KAAK;AAC1B,QAAI,SAAS,aAAa;AACxB,oBAAc;AACd,oBAAc;AAAA,IAChB;AAAA,EACF;AACA,SAAO;AACT;AAyBO,IAAM,qBAAqB,CAEhC,WACA,WACA,KAAK,mBACO;AACZ,QAAM,cAAc,cAAc,WAAW,WAAW,EAAE;AAC1D,SAAO,YAAY,EAAE,WAAW,KAAK,YAAY,EAAE,WAAW;AAChE;AAsBO,IAAM,gBAAgB,CAC3B,GACA,GACA,KAAK,mBACF;AACH,QAAM,SAAS,CAAC;AAChB,QAAM,UAAU,CAAC;AACjB,QAAM,UAAU,CAAC;AAEjB,aAAW,WAAW,GAAG;AAEvB,QAAI,UAAU;AACd,eAAW,YAAY,GAAG;AACxB,UAAI,GAAG,SAAS,QAAQ,GAAG;AACzB,kBAAU;AACV;AAAA,MACF;AAAA,IACF;AACA,QAAI,SAAS;AAEX,aAAO,KAAK,OAAO;AAAA,IACrB,OAAO;AAEL,cAAQ,KAAK,OAAO;AAAA,IACtB;AAAA,EACF;AAEA,aAAW,WAAW,GAAG;AAEvB,QAAI,UAAU;AACd,eAAW,YAAY,GAAG;AACxB,UAAI,GAAG,SAAS,QAAQ,GAAG;AACzB,kBAAU;AAAA,MACZ;AAAA,IACF;AACA,QAAI,CAAC,SAAS;AAEZ,cAAQ,KAAK,OAAO;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,SAAS,QAAQ,WAAW,KAAK,QAAQ,WAAW;AAC1D,SAAO;AAAA,IACL;AAAA,IACA,GAAG;AAAA,IACH,GAAG;AAAA,IACH;AAAA,EACF;AACF;","names":[]}